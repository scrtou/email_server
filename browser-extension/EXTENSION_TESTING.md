# 扩展测试指南

## 🚀 如何在浏览器中测试扩展

### 方法一：Chrome扩展开发者模式

1. **打开Chrome扩展管理页面**：
   - 在地址栏输入：`chrome://extensions/`
   - 或者：菜单 → 更多工具 → 扩展程序

2. **启用开发者模式**：
   - 点击右上角的"开发者模式"开关

3. **加载扩展**：
   - 点击"加载已解压的扩展程序"
   - 选择 `browser-extension` 文件夹

4. **测试扩展**：
   - 扩展加载后会出现在工具栏
   - 点击扩展图标打开popup
   - 应该看到登录页面

### 方法二：Edge扩展开发者模式

1. **打开Edge扩展管理页面**：
   - 在地址栏输入：`edge://extensions/`

2. **启用开发者模式**：
   - 点击左下角的"开发人员模式"

3. **加载扩展**：
   - 点击"加载解压缩的扩展"
   - 选择 `browser-extension` 文件夹

## 🔍 预期行为

### 初始状态
- ✅ 点击扩展图标应该显示登录页面
- ✅ 登录页面包含渐变背景头部
- ✅ 显示品牌图标和欢迎文字
- ✅ 底部有设置链接

### 登录流程
1. **输入凭据**：使用任意用户名和密码
2. **点击登录**：显示"登录中..."提示
3. **登录成功**：显示"登录成功！"消息
4. **页面切换**：1秒后自动切换到主应用界面

### 主应用界面
- ✅ 顶部显示"密码库"标题和"新增"按钮
- ✅ 搜索框和筛选器
- ✅ 账号列表（如果有数据）
- ✅ 底部四个导航标签

## 🛠️ 调试技巧

### 查看控制台日志
1. **右键点击扩展图标** → 检查弹出式窗口
2. **查看Console标签**，应该看到：
   ```
   🔄 设置初始状态：显示登录页面
   🔍 检查登录状态...
   📋 配置信息: {token: null}
   ❌ 用户未登录，显示登录页面
   🔐 显示登录页面
   ✅ 登录页面已显示
   ```

### 常见问题排查

1. **扩展图标不显示**
   - 检查manifest.json是否正确
   - 确认所有文件都在正确位置

2. **点击图标无反应**
   - 检查popup.html和popup.js是否存在
   - 查看扩展管理页面是否有错误

3. **显示空白页面**
   - 打开开发者工具查看错误
   - 检查CSS文件是否正确加载

4. **登录按钮无反应**
   - 检查background.js是否正常运行
   - 确认API端点配置正确

## 📋 测试清单

### 基本功能测试
- [ ] 扩展成功加载
- [ ] 点击图标显示popup
- [ ] 初始显示登录页面
- [ ] 登录表单可以输入
- [ ] 设置按钮可以点击
- [ ] 登录流程正常工作
- [ ] 页面切换流畅

### 界面测试
- [ ] 登录页面样式正确
- [ ] 主应用界面样式正确
- [ ] 搜索框功能正常
- [ ] 筛选器功能正常
- [ ] 底部导航正常
- [ ] 响应式布局正确

### 功能测试
- [ ] 账号列表加载
- [ ] 添加新账号
- [ ] 搜索账号
- [ ] 复制功能
- [ ] 设置页面

## 🔧 开发环境设置

### 本地预览（开发时使用）
```bash
cd browser-extension
python3 -m http.server 8080
# 访问 http://localhost:8080/popup.html
```

### 真实扩展测试（最终测试）
1. 在Chrome/Edge中加载扩展
2. 点击扩展图标测试
3. 检查所有功能是否正常

## 📝 注意事项

1. **开发vs生产**：
   - 本地预览使用模拟API
   - 真实扩展连接实际后端

2. **权限要求**：
   - 确保manifest.json中的权限正确
   - 检查host_permissions设置

3. **文件结构**：
   - 所有文件必须在browser-extension目录下
   - 路径引用必须正确

4. **调试模式**：
   - popup.html包含自动API检测
   - 非扩展环境会启用模拟模式

这个指南应该能帮助您在真实的浏览器扩展环境中测试插件的完整功能。
